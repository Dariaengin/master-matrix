<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head') %>

  <body class="container-fluid d-flex flex-column justify-content-start min-vh-100 bg-light text-black"
    style="max-width: 900px">
    <!-- Header -->
    <header class="d-flex flex-row align-items-center border-bottom mb-3">
      <a href="/" class="link-dark link-offset-2 link-underline link-underline-opacity-0">
        <h1 class="fs-3 fw-bold mt-4 mb-4">Timeline Part 5</h1>
      </a>
    </header>
    <a href="/login" class="btn btn-outline-primary ms-auto">Login</a>
    <!-- Main content  -->
    <main class="container flex-grow-1">
      <div class="d-flex flex-column align-items-center">
        <!-- Create a new post  -->
        <%- include('./partials/addPostForm') %>
      </div>
    


      <!-- Display posts -->
      <div>
        <% if (postList.length> 0) { %>
          <% postList.forEach(post=> { %>
            <h2 class="fs-5 mb-2">
              <span class="fw-bold">
                <%= post.name %>
              </span> -
              <span class="text-body-secondary fw-light">
                <%= new Date(post.createdAt).toLocaleDateString() %>
              </span>
            </h2>

            <!-- Post Message & Actions -->
            <div class="d-flex flex-row justify-content-between">
              <p class="ms-4 me-4 mb-3">
                <%= post.message %>
              </p>
              <div class="d-flex flex-row">
                <form action="/delete/post/<%= post._id %>" method="POST">
                  <button class="btn btn-danger me-2" type="submit">Delete</button>
                </form>

                <form action="/edit-form/<%= post._id %>" method="POST">
                  <button class="btn btn-success">Edit</button>
                </form>
              </div>
            </div>

            <!-- Add Comment Form -->
            <%- include('./partials/addCommentForm', { post: post, err: errCommentLength }) %>

              <!-- Comment List -->
              <!-- <% if (post.comments && post.comments.length> 0) { %>
                <ul class="list-group mb-3">
                  <% post.comments.forEach(comment=> { %>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      <span>
                        <%= comment.comment %>
                      </span>
                      <form action="/delete/post/comment/<%= comment._id %>/<%= post._id %>?_method=DELETE" method="POST">
                        <button class="btn btn-danger btn-sm" type="submit">Delete</button>
                      </form>
                    </li>
                    <% }) %>
                </ul>
                <% } %>
                  <% }) %>
                    <% } %>
      </div> -->

    </main>
    <!-- Footer -->
    <%- include('./partials/footer') %>

      <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
      <script src="../public/script.js" defer></script>
  </body>

</html>